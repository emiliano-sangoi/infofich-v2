{# -basado en cambiar estado de planificacion- #}
{% extends '::base.html.twig' %}

{% set ROL_SA = constant('AppBundle\\Entity\\Rol::ROLE_SEC_ACADEMICA') %}
{% set ROLE_ADMIN = constant('AppBundle\\Entity\\Rol::ROLE_ADMIN') %}
{% set ROL_SI = constant('AppBundle\\Entity\\Rol::ROLE_SEC_INFRAESTRUCTURA') %}

{% set full_width = false %}

{% block navbar2 %}
    {% embed 'navbar2.html.twig' %}
        {% block navbar2_actions %}
            <a href="{{ path('reservas_listado') }}" class="">
                <i class="fa fa-arrow-left"></i>&nbsp;&nbsp;
                Volver
            </a>
        {% endblock %}
    {% endembed %}
{% endblock %}


{% block content %}

    <div class="pb-5">

        <div class="my-3">
            {% include '::notificaciones.html.twig' %}
        </div>
     
        <h2 class="font-weight-bold text-primary">
            {{ reserva }}
        </h2>
        <hr class="mt-0 border-primary mb-2 mb-lg-3" style="border-width: 2px;"/>

        {% include 'VehiculosBundle:Reserva:cambiar-estado.html.twig' %}


        {% embed '::botonera.html.twig' %}

        {% if app.user.tieneRol(ROLE_ADMIN) or  app.user.tieneRol(ROL_SI)%}

            {% block left %}
                   
                        {#{ form_start(form_avalar) }}
                        <button role="submit" class="btn  btn-info">
                            <i class="fa fa-check"></i>&nbsp;Avalar
                        </button>
                        {#{ form_end(form_avalar) }#}

                        {# Si la reserva tiene estado nueva se puede avalar o rechazar #}
                        {{ form_start(form) }}
                            {% if reserva.esNueva()  %}
                        
                                <button role="submit" class="btn btn-success">
                                    <i class="fa fa-check"></i>&nbsp;Avalar
                                </button>   
                            {% endif %}
                            <a href="{{ path('reservas_listado') }}"
                                class="btn btn-secondary">
                                Cancelar
                            </a>
                                     

            {% endblock %}

            {% block right %}
                 {% if reserva.esNueva()  %}
                        <button role="submit" class="btn btn-danger">
                            <i class="fa fa-ban"></i>&nbsp;Rechazar
                        </button>
                    {% endif %}
                {{ form_end(form) }}          
            {% endblock %}

        {% endif %}

        {% endembed %}
    
    </div>

{% endblock %}
