{% extends '::base.html.twig' %}

{% block navbar2 %}     
    {% embed 'navbar2.html.twig' %}         
        {% block navbar2_actions %}
            <a href="{{ path('planificaciones_homepage') }}" class="">
                <i class="fa fa-arrow-left"></i>
                Ir a planificaciones
            </a>     
        {% endblock %}
    {% endembed %}
{% endblock %}

{% block content %}
    <div class="">

        <div class="">
            {% include '::notificaciones.html.twig' %}
        </div>

        <div class="p-5 bg-light shadow">
            <h3 class='font-weight-bold text-primary'>
                Cambiar Estado
            </h3>
            <div class="mt-5">
                <h4 class="font-weight-bold">
                    Datos Planificación :
                </h4>
                <div class="table-responsive mt-3">
                    {% include 'PlanificacionesBundle:planificacion:tabla-info-planif.html.twig' with {'bandera':'cambiarEstado'} %}
                </div>
                <div class="text-right">
                    <a href="{{ path('planificaciones_revisar', {id : planificacion.id }) }}" target="_blank" class="" title="Ver más datos de esta planificación">
                        Ver m&aacute;s datos ...
                    </a>
                </div>

                    <div class="mt-5">
                        {% embed '::botonera.html.twig' %}

                            {% block left %}
                                <button type="submit" role="button" class="btn btn-success">
                                    <i class="fa fa-check"></i>&nbsp;
                                    Cambiar estado
                                </button> 
                            {% endblock %}

                            {% block right %}
                                <a href="{{ path('planificaciones_homepage') }}" class="btn btn-outline-primary">
                                    Cancelar
                                </a>                       
                            {% endblock %}

                        {% endembed %}
                    </div>

                    {{ form_end(form) }}
                </div>
            </div>



        </div>

    </div>
{% endblock %}

{% block javascripts %}
    {{ parent() }}

    <script src="{{ asset('bundles/planificaciones/js/planificaciones.js') }}"></script>

    <script>

        $(document).ready(function () {


            $(document).ready(function () {

                select_carreras = $('#duplicar_planificacion_carrera');
                select_asignatura = $('#duplicar_planificacion_codigoAsignatura');
                ASIGNATURA_ACTUAL = "{{ planificacion.codigoAsignatura }}";

                //resetInfoAsignatura();

                // combo de carreras:           
                select_carreras.change(actualizarAsignaturas);

        {#           //combo de asignaturas:
                   select_asignatura.change(function (e) {
                       var option = $(this).children("option:selected");
                       var asignatura = JSON.parse(option.attr('data-json'));

                       cargarInfoAsignatura(asignatura);
                   });#}

                //disparar el evento en las carreras lo que permite que se cargan las asignaturas y luego la infor de la asignatura
                select_carreras.trigger('change');


            });



        });


    </script>

{% endblock %}